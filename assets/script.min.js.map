{"version":3,"file":"script.min.js","sources":["../scripts/utils.js","../scripts/navigation.js","../scripts/api.js","../scripts/search.js","../scripts/index.js"],"sourcesContent":["/**\n * Gets browser agent type\n * @return { object } { device, browser }\n * */\nexport const getNavigatorAgent = function () {\n\tconst userAgent = navigator.userAgent;\n\tlet device = null;\n\tlet browser = null;\n\n\tif (userAgent.match(/Android/i)) device = 'android';\n\tif (userAgent.match(/BlackBerry/i)) device = 'blackberry';\n\tif (userAgent.match(/iPhone|iPad|iPod/i)) device = 'ios';\n\tif (userAgent.match(/Opera Mini/i)) device = 'opera-mini';\n\tif (userAgent.match(/IEMobile/i)) device = 'ie-mobile';\n\tif (userAgent.match(/IEMobile/i)) device = 'ie-mobile';\n\n\tif (userAgent.indexOf('chrome') > -1 || userAgent.indexOf('Chrome') > -1) {\n\t\tbrowser = 'chrome';\n\t\treturn { browser, device };\n\t}\n\tif (userAgent.indexOf('firefox') > -1 || userAgent.indexOf('Firefox') > -1) {\n\t\tbrowser = 'firefox';\n\t\treturn { browser, device };\n\t}\n\tif (userAgent.indexOf('safari') > -1 || userAgent.indexOf('Safari') > -1) {\n\t\tbrowser = 'safari';\n\t\treturn { browser, device };\n\t}\n\tif (userAgent.indexOf('opr') > -1 || userAgent.indexOf('Opr') > -1) {\n\t\tbrowser = 'opera';\n\t\treturn { browser, device };\n\t}\n\tif (\n\t\tuserAgent.indexOf('edg') > -1 ||\n\t\tuserAgent.indexOf('edge') > -1 ||\n\t\tuserAgent.indexOf('Edg') > -1 ||\n\t\tuserAgent.indexOf('Edge') > -1\n\t) {\n\t\tbrowser = 'edge';\n\t\treturn { browser, device };\n\t}\n\tif (userAgent.indexOf('trident') > -1 || userAgent.indexOf('Trident') > -1) {\n\t\tbrowser = 'internet-explorer';\n\t\treturn { browser, device };\n\t}\n\n\treturn { device, browser };\n};\n\n/**\n * Gets CSS variables for usage\n * @param { string } variable name\n * */\nexport const getCSSVariable = function (variable) {\n\treturn getComputedStyle(document.body).getPropertyValue(variable);\n};\n\n/**\n * Creates intersection observe to detect when element comes into view\n * @params { object } el - dom element to monitor\n * @params { func } callback - returns event when dom element comes in and out of status\n * */\nexport const intersectionObserver = function (el, callback, options = {}) {\n\tif (!el || !callback) return;\n\tconst observer = new IntersectionObserver(callback, options);\n\tobserver.observe(el);\n};\n\n/**\n * Listens for change on element class names\n * @param { object } el - target dom element\n * @param { string } classname - class to listen for toggle on and off\n * @param { func } on - callback for active class\n * @param { func } off - callback for inactive class\n * */\nexport const classObserver = function (el, classname, on, off) {\n\tif (!el || !classname) return;\n\n\tconst observer = new MutationObserver(function (event) {\n\t\tif (el.className.indexOf(classname) > -1 && on) on();\n\t\tif (el.className.indexOf(classname) === -1 && off) off();\n\t});\n\n\tobserver.observe(el, {\n\t\tattributes: true,\n\t\tattributeFilter: ['class'],\n\t\tchildList: false,\n\t\tcharacterData: false,\n\t});\n};\n\n/**\n * Creates aribtrary wait time based on miliseconds\n * @param { int } milliseconds\n * @return { promise } resolves once time has been reached\n * */\nexport const asyncTimeout = function (ms) {\n\treturn new Promise((resolve) => setTimeout(resolve, ms));\n};\n","import { asyncTimeout, getCSSVariable } from './utils.js';\n\nconst state = {\n\tactive: false,\n\tset setActive(active) {\n\t\tthis.active = active;\n\t},\n};\n\nconst active = 'eather-header__dropdown-item--active';\nconst md = parseInt(getCSSVariable('--md'));\nconst duration = parseInt(getCSSVariable('--animate-duration'));\n\nconst clearNavItems = function () {\n\tconst navItems = document.querySelectorAll('[data-nav-item]');\n\tnavItems.forEach((navItem) => navItem.classList.remove(active));\n\tconst menus = document.querySelectorAll('[data-nav]');\n\tmenus.forEach((menu) => menu.classList.remove('active'));\n};\n\nconst clearDropdowns = function () {\n\tconst dropdowns = document.querySelectorAll('[data-nav-dropdown]');\n\tdropdowns.forEach((dropdown) => dropdown.addEventListener('mouseleave', () => clearNavItems()));\n};\n\nconst displayNavItems = function () {\n\tconst navItems = document.querySelectorAll('[data-nav-item]');\n\n\tnavItems.forEach((navItem) => {\n\t\tconst _select = () => {\n\t\t\tconst selector = navItem.getAttribute('data-nav-item');\n\t\t\tconst nav = document.querySelector(`[data-nav=\"${selector}\"]`);\n\t\t\tclearNavItems();\n\t\t\tnavItem.classList.add(active);\n\t\t\tnav.classList.add('active');\n\t\t};\n\t\tnavItem.addEventListener('mouseover', () => _select());\n\t\tnavItem.addEventListener('click', () => _select());\n\t});\n};\n\nconst mobileNavBtn = function () {\n\tconst header = document.querySelector('header');\n\tconst nav = document.querySelector('[data-nav]');\n\tconst btn = document.querySelector('[data-nav-btn]');\n\tif (!nav || !btn) return;\n\n\tconst limit = header.getBoundingClientRect().bottom;\n\tconst bounds = nav.getBoundingClientRect();\n\n\tconst _close = async () => {\n\t\tnav.classList.add('animate__slideOutLeft');\n\n\t\tawait asyncTimeout(duration);\n\t\tdocument.body.classList.remove('nav-active');\n\t\tnav.classList.remove('animate__slideInLeft');\n\t\tnav.classList.remove('animate__slideOutLeft');\n\t\tstate.setActive = false;\n\t};\n\n\tbtn.addEventListener('click', async () => {\n\t\tif (!state.active) {\n\t\t\tdocument.body.classList.add('nav-active');\n\t\t\tnav.style.top = limit + 'px';\n\t\t\tnav.style.height = window.innerHeight - limit + 'px';\n\t\t\tnav.classList.add('animate__slideInLeft');\n\t\t\tawait asyncTimeout(duration);\n\t\t\tstate.setActive = true;\n\t\t\treturn;\n\t\t}\n\n\t\t_close();\n\t});\n\n\twindow.addEventListener('resize', () => {\n\t\tif (window.innerWidth > md && state.active) {\n\t\t\t_close;\n\t\t}\n\t});\n};\n\nexport const navigation = function () {\n\tdisplayNavItems();\n\tclearDropdowns();\n\tmobileNavBtn();\n};\n","export const search = {\n\tget: async (term) => {\n\t\ttry {\n\t\t\tconst res = await fetch(\n\t\t\t\t`/search/suggest?q=${term}&resources[type]=product&resources[limit]=4&section_id=predictive-search`\n\t\t\t);\n\n\t\t\tif (!res.ok) {\n\t\t\t\tthrow new Error(res.status);\n\t\t\t}\n\n\t\t\tconst text = await res.text();\n\n\t\t\treturn new DOMParser()\n\t\t\t\t.parseFromString(text, 'text/html')\n\t\t\t\t.querySelector('#shopify-section-predictive-search').innerHTML;\n\t\t} catch (err) {\n\t\t\treturn err;\n\t\t}\n\t},\n};\n","import { search as api } from './api.js';\nimport { getCSSVariable, asyncTimeout } from './utils.js';\n\nconst SEARCHING = 'form__input--searching';\nconst FADEIN = 'animate__fadeIn';\nconst FADEOUT = 'animate__fadeOut';\n\nconst delay = parseInt(getCSSVariable('--animate-duration'));\nconst state = {\n\tforms: {},\n\tresults: null,\n\tset initForms(forms) {\n\t\tif (!forms) return;\n\n\t\tconst obj = {};\n\t\tforms.forEach((form, id) => {\n\t\t\tform.addEventListener('submit', (e) => e.preventDefault());\n\t\t\tconst input = form.querySelector('input');\n\t\t\tconst results = form.querySelector('.form__search-results');\n\n\t\t\tobj[id] = {\n\t\t\t\tform,\n\t\t\t\tinput,\n\t\t\t\tresults,\n\t\t\t};\n\n\t\t\tobj[id].input.addEventListener('keyup', doSearch.bind(input, id));\n\t\t});\n\n\t\tthis.forms = obj;\n\t},\n\tset setResults(results) {\n\t\tthis.results = results;\n\n\t\tif (!results) return;\n\t\tdisplayResults();\n\t},\n};\n\nconst doSearch = async function (id) {\n\tconst inputContainer = this.parentElement;\n\tlet timeout = null;\n\tclearTimeout(timeout);\n\n\tif (!this.value) {\n\t\ttimeout = null;\n\t\tclearResults();\n\t\treturn;\n\t}\n\n\tinputContainer.classList.add(SEARCHING);\n\ttimeout = setTimeout(async () => {\n\t\tconst results = await api.get(this.value);\n\t\tstate.setResults = { id, results };\n\t\tinputContainer.classList.remove(SEARCHING);\n\t}, 500);\n};\n\nconst displayResults = function () {\n\tif (!state.results) return;\n\tconst { id, results } = state.results;\n\n\tconst container = state.forms[id].results;\n\tcontainer.innerHTML = results;\n\tcontainer.classList.remove(FADEOUT);\n\tcontainer.classList.add(FADEIN);\n\n\tconst _close = (e) => {\n\t\tconst { x, y, width, height } = container.getBoundingClientRect();\n\t\tconst { clientX, clientY } = e;\n\n\t\tif (clientX < x || clientX > x + width) {\n\t\t\tclearResults();\n\t\t\tdocument.removeEventListener('click', _close);\n\t\t}\n\t\tif (clientY < y || clientY > y + height) {\n\t\t\tclearResults();\n\t\t\tdocument.removeEventListener('click', _close);\n\t\t}\n\t};\n\n\tdocument.addEventListener('click', _close);\n};\n\nconst clearResults = async function () {\n\tif (!state.results) return;\n\n\tconst { results, id } = state.results;\n\tconst input = state.forms[id].input;\n\tconst container = state.forms[id].results;\n\n\tinput.value = '';\n\tstate.setResults = null;\n\tcontainer.classList.add(FADEOUT);\n\n\tawait asyncTimeout(delay);\n\n\tcontainer.innerHTML = '';\n\tcontainer.classList.remove(FADEOUT);\n\tcontainer.classList.remove(FADEIN);\n};\n\nexport const search = async function () {\n\tconst forms = document.querySelectorAll('.feather-header__search form');\n\tstate.initForms = forms;\n};\n","import { navigation } from './navigation.js';\nimport { search } from './search.js';\n\nwindow.onload = async function () {\n\tconsole.log('--Initializing Scripts');\n\n\tdocument.documentElement.className = document.documentElement.className.replace('no-js', 'js');\n\tif (Shopify.designMode) document.documentElement.classList.add('shopify-design-mode');\n\n\tnavigation();\n\tsearch();\n\n\tconsole.log('--Scripts Loaded');\n};\n"],"names":["getCSSVariable","variable","getComputedStyle","document","body","getPropertyValue","asyncTimeout","ms","Promise","resolve","setTimeout","state","active","setActive","this","parseInt","duration","clearNavItems","querySelectorAll","forEach","navItem","classList","remove","menu","mobileNavBtn","header","querySelector","nav","btn","limit","getBoundingClientRect","bottom","addEventListener","async","add","style","top","height","window","innerHeight","_close","navigation","_select","selector","getAttribute","dropdown","search","term","res","fetch","ok","Error","status","text","DOMParser","parseFromString","innerHTML","err","SEARCHING","FADEIN","FADEOUT","delay","forms","results","initForms","obj","form","id","e","preventDefault","input","doSearch","bind","setResults","displayResults","inputContainer","parentElement","timeout","clearTimeout","value","clearResults","api","container","x","y","width","clientX","clientY","removeEventListener","onload","console","log","documentElement","className","replace","Shopify","designMode"],"mappings":"yBAqDO,MAAMA,EAAiB,SAAUC,GACvC,OAAOC,iBAAiBC,SAASC,MAAMC,iBAAiBJ,IA0C5CK,EAAe,SAAUC,GACrC,OAAO,IAAIC,SAASC,GAAYC,WAAWD,EAASF,MC/F/CI,EAAQ,CACbC,QAAQ,EACJC,cAAUD,GACbE,KAAKF,OAASA,IAIVA,EAAS,uCACJG,SAASf,EAAe,SACnC,MAAMgB,EAAWD,SAASf,EAAe,uBAEnCiB,EAAgB,WACJd,SAASe,iBAAiB,mBAClCC,SAASC,GAAYA,EAAQC,UAAUC,OAAOV,KACzCT,SAASe,iBAAiB,cAClCC,SAASI,GAASA,EAAKF,UAAUC,OAAO,aAwBzCE,EAAe,WACpB,MAAMC,EAAStB,SAASuB,cAAc,UAChCC,EAAMxB,SAASuB,cAAc,cAC7BE,EAAMzB,SAASuB,cAAc,kBACnC,IAAKC,IAAQC,EAAK,OAElB,MAAMC,EAAQJ,EAAOK,wBAAwBC,OAC9BJ,EAAIG,wBAYnBF,EAAII,iBAAiB,SAASC,UAC7B,IAAKtB,EAAMC,OAOV,OANAT,SAASC,KAAKiB,UAAUa,IAAI,cAC5BP,EAAIQ,MAAMC,IAAMP,EAAQ,KACxBF,EAAIQ,MAAME,OAASC,OAAOC,YAAcV,EAAQ,KAChDF,EAAIN,UAAUa,IAAI,8BACZ5B,EAAaU,QACnBL,EAAME,WAAY,GAjBLoB,WACdN,EAAIN,UAAUa,IAAI,+BAEZ5B,EAAaU,GACnBb,SAASC,KAAKiB,UAAUC,OAAO,cAC/BK,EAAIN,UAAUC,OAAO,wBACrBK,EAAIN,UAAUC,OAAO,yBACrBX,EAAME,WAAY,GAclB2B,MAGDF,OAAON,iBAAiB,UAAU,UAOtBS,EAAa,WAvDRtC,SAASe,iBAAiB,mBAElCC,SAASC,IACjB,MAAMsB,EAAU,KACf,MAAMC,EAAWvB,EAAQwB,aAAa,iBAChCjB,EAAMxB,SAASuB,cAAc,cAAciB,OACjD1B,IACAG,EAAQC,UAAUa,IAAItB,GACtBe,EAAIN,UAAUa,IAAI,WAEnBd,EAAQY,iBAAiB,aAAa,IAAMU,MAC5CtB,EAAQY,iBAAiB,SAAS,IAAMU,SAhBvBvC,SAASe,iBAAiB,uBAClCC,SAAS0B,GAAaA,EAASb,iBAAiB,cAAc,IAAMf,QA8D9EO,KCpFYsB,EACPb,MAAOc,IACX,IACC,MAAMC,QAAYC,MACjB,qBAAqBF,6EAGtB,IAAKC,EAAIE,GACR,MAAM,IAAIC,MAAMH,EAAII,QAGrB,MAAMC,QAAaL,EAAIK,OAEvB,OAAO,IAAIC,WACTC,gBAAgBF,EAAM,aACtB3B,cAAc,sCAAsC8B,UACrD,MAAOC,GACR,OAAOA,ICdJC,EAAY,yBACZC,EAAS,kBACTC,EAAU,mBAEVC,EAAQ9C,SAASf,EAAe,uBAChCW,EAAQ,CACbmD,MAAO,GACPC,QAAS,KACLC,cAAUF,GACb,IAAKA,EAAO,OAEZ,MAAMG,EAAM,GACZH,EAAM3C,SAAQ,CAAC+C,EAAMC,KACpBD,EAAKlC,iBAAiB,UAAWoC,GAAMA,EAAEC,mBACzC,MAAMC,EAAQJ,EAAKxC,cAAc,SAC3BqC,EAAUG,EAAKxC,cAAc,yBAEnCuC,EAAIE,GAAM,CACTD,OACAI,QACAP,WAGDE,EAAIE,GAAIG,MAAMtC,iBAAiB,QAASuC,EAASC,KAAKF,EAAOH,OAG9DrD,KAAKgD,MAAQG,GAEVQ,eAAWV,GACdjD,KAAKiD,QAAUA,EAEVA,GACLW,MAIIH,EAAWtC,eAAgBkC,GAChC,MAAMQ,EAAiB7D,KAAK8D,cAC5B,IAAIC,EAAU,KAGd,GAFAC,aAAaD,IAER/D,KAAKiE,MAGT,OAFAF,EAAU,UACVG,IAIDL,EAAetD,UAAUa,IAAIwB,GAC7BmB,EAAUnE,YAAWuB,UACpB,MAAM8B,QAAgBkB,EAAQnE,KAAKiE,OACnCpE,EAAM8D,WAAa,CAAEN,KAAIJ,WACzBY,EAAetD,UAAUC,OAAOoC,KAC9B,MAGEgB,EAAiB,WACtB,IAAK/D,EAAMoD,QAAS,OACpB,MAAMI,GAAEA,EAAEJ,QAAEA,GAAYpD,EAAMoD,QAExBmB,EAAYvE,EAAMmD,MAAMK,GAAIJ,QAClCmB,EAAU1B,UAAYO,EACtBmB,EAAU7D,UAAUC,OAAOsC,GAC3BsB,EAAU7D,UAAUa,IAAIyB,GAExB,MAAMnB,EAAU4B,IACf,MAAMe,EAAEA,EAACC,EAAEA,EAACC,MAAEA,EAAKhD,OAAEA,GAAW6C,EAAUpD,yBACpCwD,QAAEA,EAAOC,QAAEA,GAAYnB,GAEzBkB,EAAUH,GAAKG,EAAUH,EAAIE,KAChCL,IACA7E,SAASqF,oBAAoB,QAAShD,KAEnC+C,EAAUH,GAAKG,EAAUH,EAAI/C,KAChC2C,IACA7E,SAASqF,oBAAoB,QAAShD,KAIxCrC,SAAS6B,iBAAiB,QAASQ,IAG9BwC,EAAe/C,iBACpB,IAAKtB,EAAMoD,QAAS,OAEpB,MAAMA,QAAEA,EAAOI,GAAEA,GAAOxD,EAAMoD,QACxBO,EAAQ3D,EAAMmD,MAAMK,GAAIG,MACxBY,EAAYvE,EAAMmD,MAAMK,GAAIJ,QAElCO,EAAMS,MAAQ,GACdpE,EAAM8D,WAAa,KACnBS,EAAU7D,UAAUa,IAAI0B,SAElBtD,EAAauD,GAEnBqB,EAAU1B,UAAY,GACtB0B,EAAU7D,UAAUC,OAAOsC,GAC3BsB,EAAU7D,UAAUC,OAAOqC,IChG5BrB,OAAOmD,OAASxD,iBACfyD,QAAQC,IAAI,0BAEZxF,SAASyF,gBAAgBC,UAAY1F,SAASyF,gBAAgBC,UAAUC,QAAQ,QAAS,MACrFC,QAAQC,YAAY7F,SAASyF,gBAAgBvE,UAAUa,IAAI,uBAE/DO,ID6FqBR,iBACrB,MAAM6B,EAAQ3D,SAASe,iBAAiB,gCACxCP,EAAMqD,UAAYF,EC9FlBhB,GAEA4C,QAAQC,IAAI"}