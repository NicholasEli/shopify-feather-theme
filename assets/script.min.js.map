{"version":3,"file":"script.min.js","sources":["../scripts/utils.js","../scripts/navigation.js","../scripts/api.js","../scripts/search.js","../scripts/index.js"],"sourcesContent":["/**\n * Gets browser agent type\n * @return { object } { device, browser }\n * */\nexport const getNavigatorAgent = function () {\n\tconst userAgent = navigator.userAgent;\n\tlet device = null;\n\tlet browser = null;\n\n\tif (userAgent.match(/Android/i)) device = 'android';\n\tif (userAgent.match(/BlackBerry/i)) device = 'blackberry';\n\tif (userAgent.match(/iPhone|iPad|iPod/i)) device = 'ios';\n\tif (userAgent.match(/Opera Mini/i)) device = 'opera-mini';\n\tif (userAgent.match(/IEMobile/i)) device = 'ie-mobile';\n\tif (userAgent.match(/IEMobile/i)) device = 'ie-mobile';\n\n\tif (userAgent.indexOf('chrome') > -1 || userAgent.indexOf('Chrome') > -1) {\n\t\tbrowser = 'chrome';\n\t\treturn { browser, device };\n\t}\n\tif (userAgent.indexOf('firefox') > -1 || userAgent.indexOf('Firefox') > -1) {\n\t\tbrowser = 'firefox';\n\t\treturn { browser, device };\n\t}\n\tif (userAgent.indexOf('safari') > -1 || userAgent.indexOf('Safari') > -1) {\n\t\tbrowser = 'safari';\n\t\treturn { browser, device };\n\t}\n\tif (userAgent.indexOf('opr') > -1 || userAgent.indexOf('Opr') > -1) {\n\t\tbrowser = 'opera';\n\t\treturn { browser, device };\n\t}\n\tif (\n\t\tuserAgent.indexOf('edg') > -1 ||\n\t\tuserAgent.indexOf('edge') > -1 ||\n\t\tuserAgent.indexOf('Edg') > -1 ||\n\t\tuserAgent.indexOf('Edge') > -1\n\t) {\n\t\tbrowser = 'edge';\n\t\treturn { browser, device };\n\t}\n\tif (userAgent.indexOf('trident') > -1 || userAgent.indexOf('Trident') > -1) {\n\t\tbrowser = 'internet-explorer';\n\t\treturn { browser, device };\n\t}\n\n\treturn { device, browser };\n};\n\n/**\n * Gets CSS variables for usage\n * @param { string } variable name\n * */\nexport const getCSSVariable = function (variable) {\n\treturn getComputedStyle(document.body).getPropertyValue(variable);\n};\n\n/**\n * Creates intersection observe to detect when element comes into view\n * @params { object } el - dom element to monitor\n * @params { func } callback - returns event when dom element comes in and out of status\n * */\nexport const intersectionObserver = function (el, callback, options = {}) {\n\tif (!el || !callback) return;\n\tconst observer = new IntersectionObserver(callback, options);\n\tobserver.observe(el);\n};\n\n/**\n * Listens for change on element class names\n * @param { object } el - target dom element\n * @param { string } classname - class to listen for toggle on and off\n * @param { func } on - callback for active class\n * @param { func } off - callback for inactive class\n * */\nexport const classObserver = function (el, classname, on, off) {\n\tif (!el || !classname) return;\n\n\tconst observer = new MutationObserver(function (event) {\n\t\tif (el.className.indexOf(classname) > -1 && on) on();\n\t\tif (el.className.indexOf(classname) === -1 && off) off();\n\t});\n\n\tobserver.observe(el, {\n\t\tattributes: true,\n\t\tattributeFilter: ['class'],\n\t\tchildList: false,\n\t\tcharacterData: false,\n\t});\n};\n\n/**\n * Creates aribtrary wait time based on miliseconds\n * @param { int } milliseconds\n * @return { promise } resolves once time has been reached\n * */\nexport const asyncTimeout = function (ms) {\n\treturn new Promise((resolve) => setTimeout(resolve, ms));\n};\n","import { asyncTimeout, getCSSVariable } from './utils.js';\n\nconst state = {\n\tactive: false,\n\tset setActive(active) {\n\t\tthis.active = active;\n\t},\n};\n\nconst active = 'eather-header__dropdown-item--active';\nconst md = parseInt(getCSSVariable('--md'));\nconst duration = parseInt(getCSSVariable('--animate-duration'));\n\nconst clearNavItems = function () {\n\tconst navItems = document.querySelectorAll('[data-nav-item]');\n\tnavItems.forEach((navItem) => navItem.classList.remove(active));\n\tconst menus = document.querySelectorAll('[data-nav]');\n\tmenus.forEach((menu) => menu.classList.remove('active'));\n};\n\nconst clearDropdowns = function () {\n\tconst dropdowns = document.querySelectorAll('[data-nav-dropdown]');\n\tdropdowns.forEach((dropdown) => dropdown.addEventListener('mouseleave', () => clearNavItems()));\n};\n\nconst displayNavItems = function () {\n\tconst navItems = document.querySelectorAll('[data-nav-item]');\n\n\tnavItems.forEach((navItem) => {\n\t\tconst _select = () => {\n\t\t\tconst selector = navItem.getAttribute('data-nav-item');\n\t\t\tconst nav = document.querySelector(`[data-nav=\"${selector}\"]`);\n\t\t\tclearNavItems();\n\t\t\tnavItem.classList.add(active);\n\t\t\tnav.classList.add('active');\n\t\t};\n\t\tnavItem.addEventListener('mouseover', () => _select());\n\t\tnavItem.addEventListener('click', () => _select());\n\t});\n};\n\nconst mobileNavBtn = function () {\n\tconst nav = document.querySelector('[data-nav]');\n\tconst btn = document.querySelector('[data-nav-btn]');\n\tif (!nav || !btn) return;\n\n\tconst bounds = nav.getBoundingClientRect();\n\n\tconst _close = async () => {\n\t\tnav.classList.add('animate__slideOutLeft');\n\n\t\tawait asyncTimeout(duration);\n\t\tdocument.body.classList.remove('nav-active');\n\t\tnav.classList.remove('animate__slideInLeft');\n\t\tnav.classList.remove('animate__slideOutLeft');\n\t\tstate.setActive = false;\n\t};\n\n\tbtn.addEventListener('click', async () => {\n\t\tif (!state.active) {\n\t\t\tdocument.body.classList.add('nav-active');\n\t\t\tnav.classList.add('animate__slideInLeft');\n\t\t\tawait asyncTimeout(duration);\n\t\t\tstate.setActive = true;\n\t\t\treturn;\n\t\t}\n\n\t\t_close();\n\t});\n\n\tdocument.body.addEventListener('click', (e) => {\n\t\tconst x = e.clientX;\n\t\tconst y = e.clientY;\n\n\t\tif (!state.active) return;\n\n\t\tconsole.log(bounds.y, bounds.bottom, y);\n\t\tif (y < bounds.top || y > bounds.bottom) {\n\t\t\t_close();\n\t\t}\n\t});\n\n\twindow.addEventListener('resize', () => {\n\t\tif (window.innerWidth > md && state.active) {\n\t\t\t_close;\n\t\t}\n\t});\n};\n\nexport const navigation = function () {\n\tdisplayNavItems();\n\tclearDropdowns();\n\tmobileNavBtn();\n};\n","export const search = {\n\tget: async (term) => {\n\t\ttry {\n\t\t\tconst res = await fetch(\n\t\t\t\t`/search/suggest?q=${term}&resources[type]=product&resources[limit]=4&section_id=predictive-search`\n\t\t\t);\n\n\t\t\tif (!res.ok) {\n\t\t\t\tthrow new Error(res.status);\n\t\t\t}\n\n\t\t\tconst text = await res.text();\n\n\t\t\treturn new DOMParser()\n\t\t\t\t.parseFromString(text, 'text/html')\n\t\t\t\t.querySelector('#shopify-section-predictive-search').innerHTML;\n\t\t} catch (err) {\n\t\t\treturn err;\n\t\t}\n\t},\n};\n","import { search as api } from './api.js';\nimport { getCSSVariable, asyncTimeout } from './utils.js';\n\nconst SEARCHING = 'form__input--searching';\nconst FADEIN = 'animate__fadeIn';\nconst FADEOUT = 'animate__fadeOut';\n\nconst delay = parseInt(getCSSVariable('--animate-duration'));\nconst state = {\n\tforms: {},\n\tresults: null,\n\tset initForms(forms) {\n\t\tif (!forms) return;\n\n\t\tconst obj = {};\n\t\tforms.forEach((form, id) => {\n\t\t\tform.addEventListener('submit', (e) => e.preventDefault());\n\t\t\tconst input = form.querySelector('input');\n\t\t\tconst results = form.querySelector('.form__search-results');\n\n\t\t\tobj[id] = {\n\t\t\t\tform,\n\t\t\t\tinput,\n\t\t\t\tresults,\n\t\t\t};\n\n\t\t\tobj[id].input.addEventListener('keyup', doSearch.bind(input, id));\n\t\t});\n\n\t\tthis.forms = obj;\n\t},\n\tset setResults(results) {\n\t\tif (!results) return;\n\t\tthis.results = results;\n\t\tdisplayResults();\n\t},\n};\n\nconst doSearch = async function (id) {\n\tconst inputContainer = this.parentElement;\n\tlet timeout = null;\n\tclearTimeout(timeout);\n\n\tif (!this.value) {\n\t\ttimeout = null;\n\t\tclearResults();\n\t\treturn;\n\t}\n\n\tinputContainer.classList.add(SEARCHING);\n\ttimeout = setTimeout(async () => {\n\t\tconst results = await api.get(this.value);\n\t\tstate.setResults = { id, results };\n\t\tinputContainer.classList.remove(SEARCHING);\n\t}, 500);\n};\n\nconst displayResults = function () {\n\tif (!state.results) return;\n\tconst { id, results } = state.results;\n\n\tconst container = state.forms[id].results;\n\tcontainer.innerHTML = results;\n\tcontainer.classList.remove(FADEOUT);\n\tcontainer.classList.add(FADEIN);\n};\n\nconst clearResults = async function () {\n\tif (!state.results) return;\n\n\tconst { results, id } = state.results;\n\tconst container = state.forms[id].results;\n\n\tcontainer.classList.add(FADEOUT);\n\n\tawait asyncTimeout(delay);\n\n\tcontainer.innerHTML = '';\n\tcontainer.classList.remove(FADEOUT);\n\tcontainer.classList.remove(FADEIN);\n};\n\nexport const search = async function () {\n\tconst forms = document.querySelectorAll('.feather-header__search form');\n\tstate.initForms = forms;\n};\n","import { navigation } from './navigation.js';\nimport { search } from './search.js';\n\nwindow.onload = async function () {\n\tconsole.log('--Initializing Scripts');\n\n\tdocument.documentElement.className = document.documentElement.className.replace('no-js', 'js');\n\tif (Shopify.designMode) document.documentElement.classList.add('shopify-design-mode');\n\n\tnavigation();\n\tsearch();\n\n\tconsole.log('--Scripts Loaded');\n};\n"],"names":["getCSSVariable","variable","getComputedStyle","document","body","getPropertyValue","asyncTimeout","ms","Promise","resolve","setTimeout","state","active","setActive","this","parseInt","duration","clearNavItems","querySelectorAll","forEach","navItem","classList","remove","menu","navigation","_select","selector","getAttribute","nav","querySelector","add","addEventListener","dropdown","btn","bounds","getBoundingClientRect","_close","async","e","clientX","y","clientY","console","log","bottom","top","window","mobileNavBtn","search","term","res","fetch","ok","Error","status","text","DOMParser","parseFromString","innerHTML","err","SEARCHING","FADEIN","FADEOUT","delay","forms","results","initForms","obj","form","id","preventDefault","input","doSearch","bind","setResults","displayResults","inputContainer","parentElement","timeout","clearTimeout","value","clearResults","api","container","onload","documentElement","className","replace","Shopify","designMode"],"mappings":"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"}