{% liquid 
  assign products = collection.products
  assign options = products | map: 'options'


  assign variants = products | map: 'variants'

  assign all_combinations = ''
  for variant in variants
    assign variant_index = forloop.index | minus: 1
    for item in variant
      for option in item.options
        assign option_index = forloop.index | minus: 1
        assign all_combinations = all_combinations | append: options[variant_index][option_index] | append: ':' | append: option
        unless forloop.last
          assign all_combinations = all_combinations | append: ', '
        endunless
      endfor
    endfor
  endfor
%}
<script>console.log('products:', {{ products | json }})</script>
<script>console.log('options:', {{ options | json }})</script>
<script>console.log('variants:', {{ variants | json }})</script>
<p>{{ all_combinations }}</p>
<div class="row">
  <a class="feather-select feather-select--dropdown">
    <div data-select="availability" class="container">
      <span>Availablity</span>
      {% render 'icon-caret' %}
    </div>
    <div data-select-dropdown="availability" class="feather-select__dropdown feather-filters--checklist">
      <div data-filter="availability:true" class="feather-filters__item row">
        <input id="availability:true" type="checkbox" />
        <label for="availability:true">In Stock</label>
      </div>
      <div data-filter="availability:false" class="feather-filters__item row top-xs">
        <input id="availability:false" type="checkbox" />
        <label for="availability:false">Out of Stock</label>
      </div>
    </div>
  </a>
  <a class="feather-select feather-select--dropdown">
    <div data-select="price" class="container">
      <span>Price</span>
      {% render 'icon-caret' %}
    </div>
    <div data-select-dropdown="price" class="feather-select__dropdown feather-filters--price">
      <div class="feather-filters__item input">
        <label>Minimum</label>
        <input type="text" />
      </div>
      <div class="feather-filters__item input">
        <label>Maximum</label>
        <input type="text" />
      </div>
    </div>
  </a>
  
</div>